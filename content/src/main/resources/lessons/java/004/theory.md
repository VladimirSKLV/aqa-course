# Урок 4. Основы ООП для автотестов

В этом уроке только база, которая нужна для написания простых и стабильных автотестов.

## Классы и объекты

- **Класс** — шаблон (поля + методы).
- **Объект** — конкретный экземпляр класса с данными в памяти.

```java
class User {
    private final String login;

    User(String login) {
        this.login = login;
    }

    String greet() {
        return "Привет, " + login;
    }
}
```

В AQA почти всё — объекты: PageObject, API-клиент, фабрика тестовых данных, конфиг.

## Инкапсуляция

Инкапсуляция — это контроль доступа к данным объекта.

```java
class Account {
    private int balance;

    Account(int balance) {
        this.balance = balance;
    }

    void deposit(int amount) {
        if (amount <= 0) throw new IllegalArgumentException("amount <= 0");
        balance += amount;
    }

    int getBalance() {
        return balance;
    }
}
```

Почему это важно в тестах:
- тест взаимодействует с объектом через методы, а не «ломает» поля напрямую;
- проще менять реализацию без переписывания тестов;
- бизнес-правила централизованы.

## Объект с внутренним состоянием и влияние на тест

Внутреннее состояние — значения полей, которые меняются во время работы.

```java
class Cart {
    private int items;

    void addItem() { items++; }
    int itemsCount() { return items; }
}
```

Если один и тот же объект используется в нескольких тестах, состояние может «утечь» между тестами.

Плохо:
- один общий `Cart` на весь класс;
- тесты зависят от порядка выполнения.

Хорошо:
- новый объект в каждом тесте (`@BeforeEach`);
- явная подготовка и очистка данных;
- отсутствие неявных зависимостей между кейсами.
